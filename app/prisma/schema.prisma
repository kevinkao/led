// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model OutagesGroup {
  id           BigInt         @id @default(autoincrement())
  eventType    String         @map("event_type") @db.VarChar(255)
  controllerId String         @map("controller_id") @db.VarChar(255)
  startTime    DateTime       @map("start_time") @db.DateTime(0)
  endTime      DateTime       @map("end_time") @db.DateTime(0)
  createdAt    DateTime       @default(now()) @map("created_at") @db.DateTime(0)
  updatedAt    DateTime       @default(now()) @updatedAt @map("updated_at") @db.DateTime(0)

  @@index([startTime, endTime, eventType, controllerId], map: "idx_time_event_controller")
  @@index([controllerId, eventType], map: "idx_event_controller")
  @@map("outages_groups")
}

model OutagesItem {
  id             BigInt       @id @default(autoincrement())
  groupId        BigInt       @map("group_id")
  occurrenceTime DateTime     @map("occurrence_time") @db.DateTime(0)

  @@unique([groupId, occurrenceTime], map: "idx_group_id_occurrence_time")
  @@map("outages_items")
}
